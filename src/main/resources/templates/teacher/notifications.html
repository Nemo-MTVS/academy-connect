<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="fragments/layout :: head('μ•λ¦Ό λ©λ΅')"></head>
<body>

<!-- μ‚¬μ΄λ“λ°” -->
<div th:replace="fragments/layout :: sidebar('notifications')"></div>

<!-- λ³Έλ¬Έ -->
<div class="content-wrapper main-content">
    <div class="container">
        <h2 class="mb-4">π“¨ μ•λ¦Ό λ©λ΅</h2>

        <table class="table table-bordered table-hover">
            <thead class="table-light">
            <tr>
                <th>λ‚΄μ©</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="notification : ${notifications}">
                <td th:text="${notification.message}">μ•λ¦Ό λ‚΄μ©</td>
            </tr>
            <tr th:if="${#lists.isEmpty(notifications)}">
                <td colspan="5" class="text-center">μ•λ¦Όμ΄ μ—†μµλ‹λ‹¤.</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- μ¤ν¬λ¦½νΈ -->
<div th:replace="fragments/layout :: scripts"></div>
<script>
    function markAsRead(id) {
        fetch(`/notification/${id}/read`, {
            method: 'PATCH'
        }).then(() => {
            location.reload(); // μ½μ μ²λ¦¬ ν›„ μƒλ΅κ³ μΉ¨
        }).catch(err => {
            alert("μ•λ¦Ό μ½μ μ²λ¦¬ μ¤‘ μ¤λ¥ λ°μƒ");
        });
    }
</script>
</body>
</html>
